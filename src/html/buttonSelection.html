<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Dropdown | UIUXU </title>
	<link rel="stylesheet" href="../assets/css/app.css">
</head>

<body>
	<div class="area-base" data-type="sub">
		<header class="base-header"></header>
		<div class="base-body">
			<aside class="base-side"></aside>
			<main class="base-content">
				<wrap data-dir="col">
					<group data-dir="col">
						<tit>Dropdown</tit>
						<p>드롭다운 컴포넌트는 웹 페이지에서 사용자에게 선택 목록을 제공하거나, 특정 콘텐츠를 필요할 때만 보여주는 데 사용되는 UI 요소입니다. 이 가이드에서는 드롭다운 컴포넌트의 설정 가능한 옵션과 제공되는 주요 기능에 대해 설명합니다.</p>

						<box>
							<div style="display: flex; gap:0.8rem;">
								<div data-dropdown="dropdown1">
									<button type="button" data-dropdown-button="dropdown1">
										<span data-dropdown-text="dropdown1">서울시</span>
									</button>
								</div>
								<div data-dropdown="dropdown2">
									<button type="button" data-dropdown-button="dropdown2">
										<span>요일 (중복선택)</span>
									</button>
									<div data-dropdown-panel="dropdown2" aria-hidden="true">
										<div data-dropdown-section="dropdown2">
											<div data-selection="rd2"></div>
											<button type="button" onclick="UI.exe.dropdown2.hide()">닫기</button>
										</div>
									</div>
								</div>
							</div>
						</box>
					</group>

					<group data-dir="col">
						<mtit>Options</mtit>
						<p>드롭다운 컴포넌트는 constructor를 통해 다양한 옵션을 설정하여 유연하게 사용할 수 있습니다. 아래는 사용 가능한 옵션 목록입니다.</p>
						<table>
							<caption></caption>
							<colgroup>
								<col style="width: 12rem" />
								<col style="width: 14rem;" />
								<col style="width: 18rem;" />
								<col style="width: auto;" />
							</colgroup>
							<thead>
								<tr>
									<th scope="col">옵션명</th>
									<th scope="col">타입</th>
									<th scope="col">기본값</th>
									<th scope="col">설명</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<th scope="row">id</th>
									<td>String</td>
									<td>필수</td>
									<td>드롭다운 컴포넌트를 식별하는 고유 ID입니다. 이 ID를 기반으로 HTML 요소들이 연결됩니다. (data-dropdown, data-dropdown-button, data-dropdown-panel 등)</td>
								</tr>
								<tr>
									<th scope="row">area</th>
									<td>HTMLElement</td>
									<td>.area-dropdown[data-area="body"]</td>
									<td>
										드롭다운 패널이 삽입될 DOM 영역을 지정합니다. 기본값은 body의 특정 요소를 가리킵니다.
									</td>
								</tr>
								<tr>
									<th scope="row">src</th>
									<td>String</td>
									<td>null</td>
									<td>
										드롭다운 패널에 로드할 외부 HTML 콘텐츠의 경로입니다. src가 지정되면 해당 콘텐츠가 동적으로 로드되어 패널에 삽입됩니다.
									</td>
								</tr>
								<tr>
									<th scope="row">ps</th>
									<td>String</td>
									<td>null</td>
									<td>
										드롭다운 패널의 **위치(Position)**를 수동으로 설정합니다.<br />
										- bl (bottom-left), bc (bottom-center), br (bottom-right)<br> 
										- tl (top-left), tc (top-center), tr (top-right)<br> 
										- lt (left-top), lc (left-center), lb (left-bottom)<br> 
										- rt (right-top), rc (right-center), rb (right-bottom)<br> 
										null일 경우 자동으로 bl 또는 tl로 위치가 결정됩니다.
									</td>
								</tr>
								<tr>
									<th scope="row">srcCallback</th>
									<td>Function</td>
									<td>null</td>
									<td>
										src 옵션을 통해 외부 콘텐츠 로드가 완료된 후 실행될 콜백 함수입니다. 동적으로 로드된 콘텐츠 내의 요소에 대한 추가적인 초기화가 필요할 때 유용합니다.
									</td>
								</tr>
								<tr>
									<th scope="row">callback</th>
									<td>Function</td>
									<td>null</td>
									<td>
										드롭다운 컴포넌트가 init() 메서드를 통해 초기화된 직후 실행될 콜백 함수입니다.
									</td>
								</tr>
							</tbody>
						</table>
					</group>

					<group data-dir="col">
						<mtit>Script</mtit>
						<codebox>
							<code><pre contenteditable="true">
import Dropdown from './Dropdown.js';

const myDropdown = new Dropdown({
  id: 'userMenu',
  area: document.querySelector('#header-area'), // 헤더 영역에 드롭다운 패널 삽입
  src: './html/user-menu.html', // 외부 파일에서 메뉴 콘텐츠 로드
  ps: 'br', // 버튼의 오른쪽 아래에 패널 위치
  srcCallback: () => {
    console.log('User menu content loaded!');
    // 로드된 콘텐츠 내의 특정 버튼에 이벤트 리스너 추가 등
  },
  callback: () => {
    console.log('Dropdown initialized!');
  }
});

myDropdown.init();
							</pre></code>
						</codebox>
					</group>

					<group data-dir="col">
						<mtit>주요기능 (Key Features)</mtit>
						<p>드롭다운 컴포넌트는 다음과 같은 핵심 기능을 제공합니다.</p>

						<stit>초기화 ( init() )</stit>
						<p>드롭다운 컴포넌트를 초기화하고 필요한 이벤트 리스너를 설정합니다. 컴포넌트를 사용하기 전에 반드시 호출해야 합니다.</p>
					</group>
					
				</wrap>
			</main>
		</div>
		<footer class="base-footer"></footer>
	</div>

	<!-- dropdown -->
	<div class="area-dropdown" data-area="body"></div>

	<!-- script -->
	<script type="module">
/* 준비 ---------------------------------------------- */
		import { UX } from '../assets/js/uiuxu.common.js';
		UX.init();
		
/* 선언 ---------------------------------------------- */
		// buttonSelection
		UI.exe.localSelect = new UX.ButtonSelection({
			id: 'rd1',
			type: 'radio',
			label: '지역선택',
			data: [
				{ text: '서울시', value: '서울시', checked: false },
				{ text: '강남구', value: '강남구', checked: false },
				{ text: '강동구', value: '강동구', checked: true },
				{ text: '강북구', value: '강북구', checked: false },
			],
			callback: (eventData) => {
				console.log('callback localSelect: ', eventData, UI.exe.localSelect)
				document.querySelector(`[data-dropdown-text="dropdown1"]`).textContent = eventData.value;
				document.querySelector(`[data-dropdown-panel="dropdown1"][aria-hidden="false"]`) && UI.exe.dropdown1.hide();
			},
			onGroupExit: (eventData) => {
				console.log('onGroupExit!!!!!:', eventData);
				UI.exe.dropdown1.hide();
			}
		});
		UI.exe.weeklySelect = new UX.ButtonSelection({
			id: 'rd2',
			type: 'checkbox',
			label: '요일선택',
			data: [
				{ text: '월요일', value: '월요일', checked: true },
				{ text: '화요일', value: '화요일', checked: false },
				{ text: '수요일', value: '수요일', checked: false },
				{ text: '목요일', value: '목요일', checked: false },
				{ text: '금요일', value: '금요일', checked: false },
				{ text: '토요일', value: '토요일', checked: false },
				{ text: '일요일', value: '일요일', checked: false },
			],
			callback: (eventData) => {
				console.log('callback weeklySelect: ', eventData)
			},
			onGroupExit: (eventData) => {
				console.log('onGroupExit!!!!!:', eventData);
			}
		});

    // dropdown
		UI.exe.dropdown1 = new UX.Dropdown({
			id: 'dropdown1',
			src: './dropdown/dropdown1.html',
			srcCallback: () => {
				UI.exe.localSelect.init();
			},
		});
		UI.exe.dropdown2 = new UX.Dropdown({
			id: 'dropdown2',
			ps: 'rc',
			callback: () => {
				//내부 라디오버튼 선택인 경우
				UI.exe.weeklySelect.init();
			},
		});


/* 실행 ---------------------------------------------- */
		UI.exe.dropdown1.init();
		UI.exe.dropdown2.init();

	</script>
</body>

</html>