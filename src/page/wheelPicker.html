<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wheel Picker | UIUXU</title>
    <!-- loads the entire Variable Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../assets/css/app.css" />

    <style></style>
  </head>

  <body data-toggle-target="nav">
    <!-- script -->
    <script type="module">
      /* 준비 ---------------------------------------------- */
      // 전역 UI/UX 컴포넌트 및 유틸리티 라이브러리 로드
      import { UX } from "../assets/js/uiuxu.common.js";
      UX.init({
        layout: "./layout/base.html",
        page: "./content/wheelPicker.html",
        callback: () => {
          document.querySelectorAll("#selectType input").forEach((item) => {
            item.addEventListener("change", (e) => {
              const _this = e.currentTarget;
              const set = _this.value;
              const pickerArea = document.querySelector(
                `[data-wheel-picker="aa1"]`
              );
              const pickerButton = document.querySelector(
                `[data-wheel-picker-button="aa1"]`
              );
              pickerArea.dataset.set = set;
              pickerButton.dataset.set = set;
            });
          });

          // Wheel picker
          const wheelPickerButton = document.querySelector(
            '[data-wheel-picker-button="aa1"]'
          );
          const a11yBtn = document.querySelector(".wheel-picker--a11y-btn");
          a11yBtn.addEventListener("click", () => {
            const el = document.querySelector(".wheel-picker--a11y");
            el.dataset.state = el.dataset.state === "on" ? "" : "on";
          });

          UI.exe.wheelPickerYear = new UX.WheelPicker({
            el: "#iosPicker_year",
            type: "normal", // normal
            source: UX.utils.createOptions(2000, 2025),
            value: 2023,
            onChange: (resultData) => {
              wheelPickerButton.querySelector(
                '[data-wheel-picker-set="YYYY"]'
              ).textContent = resultData.text;
            },
          });
          UI.exe.wheelPickerMonth = new UX.WheelPicker({
            el: "#iosPicker_month",
            type: "normal", // normal
            source: UX.utils.createOptions(1, 12),
            value: 5,
            onChange: (resultData) => {
              wheelPickerButton.querySelector(
                '[data-wheel-picker-set="MM"]'
              ).textContent = resultData.text;
              const year = Number(
                document.querySelector(
                  '[data-wheel-picker-button="aa1"] [data-wheel-picker-set="YYYY"]'
                ).textContent
              );
              const month = Number(resultData.value);
              UI.exe.wheelPickerDay.updateSource(
                UX.utils.dayOption(year, month)
              );
            },
          });
          UI.exe.wheelPickerDay = new UX.WheelPicker({
            el: "#iosPicker_day",
            type: "infinite", // normal
            source: UX.utils.dayOption(2023, 5),
            value: 1,
            onChange: (resultData) => {
              wheelPickerButton.querySelector(
                '[data-wheel-picker-set="DD"]'
              ).textContent = resultData.text;
            },
          });
        },
      });
    </script>
  </body>
</html>
