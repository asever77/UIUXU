<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Wheel Picker | UIUXU </title>
	<!-- loads the entire Variable Font -->
	<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet" />
	<link rel="stylesheet" href="../assets/css/app.css">

	<style>
	
	</style>
</head>

<body data-toggle-target="nav">
	<div class="area-base" data-type="sub">
		<header class="base-header"></header>
		<div class="base-body">
			<aside class="base-side"></aside>
			<main class="base-content">
				<wrap data-dir="col">
					<group data-dir="col">
						<h1 data-heading="display" data-text="Wheel Picker">Wheel Picker</h1>

						<stit>IOS style</stit>
						<box>
              <fieldset id="selectType" style="font-size: 1.2rem; display: inline-flex;">
                <legend>날짜 타입 선택</legend>
                <label>
                  <input type="radio" name="type" value="YYYY-MM-DD"> YYYY-MM-DD
                </label>
                <label>
                  <input type="radio" name="type" value="MM-DD-YYYY"> MM-DD-YYYY
                </label>
                <label>
                  <input type="radio" name="type" value="DD-MM-YYYY"> DD-MM-YYYY
                </label>
              </fieldset>

              <button type="button" data-set="MM-DD-YYYY" data-wheel-picker-button="aa1">
                <span data-wheel-picker-set="YYYY">YYYY</span>
                <span data-wheel-picker-set="MM">MM</span>
                <span data-wheel-picker-set="DD">DD</span>
              </button>

              <div class="wheel-picker-area" data-wheel-picker="aa1" data-set="YYYY-MM-DD">
                <div class="wheel-picker" data-wheel-picker-set="YYYY" id="iosPicker_year" aria-hidden="true"></div>
                <div class="wheel-picker" data-wheel-picker-set="MM" id="iosPicker_month" aria-hidden="true"></div>
                <div class="wheel-picker" data-wheel-picker-set="DD" id="iosPicker_day" aria-hidden="true"></div>

                <div class="wheel-picker-a11y">
                  <select data-set="YYYY" id="iosPicker_year_a11y" style="pointer-events: none;" tabindex="0"></select>
                  <select data-set="MM" id="iosPicker_month_a11y" style="pointer-events: none;" tabindex="0"></select>
                  <select data-set="DD" id="iosPicker_day_a11y" style="pointer-events: none;"  tabindex="0"></select>
                </div>
              </div>
						</box>

          </group>
				</wrap>
			</main>
		</div>
		<footer class="base-footer"></footer>
	</div>

	<!-- dropdown -->
	<div class="area-dropdown" data-area="body"></div>

	<!-- script -->
	<script type="module">
		/* 준비 ---------------------------------------------- */
		// 전역 UI/UX 컴포넌트 및 유틸리티 라이브러리 로드	
		import { UX } from '../assets/js/uiuxu.common.js';
		UX.init();

		// test용
    document.querySelectorAll('#selectType input').forEach(item => {
      item.addEventListener('change', (e) => {
        const _this = e.currentTarget;
        const set = _this.value;
        const pickerArea = document.querySelector(`[data-wheel-picker="aa1"]`);
        const pickerButton = document.querySelector(`[data-wheel-picker-button="aa1"]`);
        pickerArea.dataset.set = set;
        pickerButton.dataset.set = set;
      })
    });

    // Wheel picker
    const wheelPickerButton = document.querySelector('[data-wheel-picker-button="aa1"]');
    UI.exe.wheelPickerYear = new UX.WheelPicker({
      el: '#iosPicker_year',
      type: 'normal', // normal
      source: UX.utils.createOptions(2000, 2025),
      value:2023,
      onChange: (resultData) => {
        wheelPickerButton.querySelector(' [data-wheel-picker-set="YYYY"]').textContent = resultData.text;
      }
    });
    UI.exe.wheelPickerMonth = new UX.WheelPicker({
      el: '#iosPicker_month',
      type: 'normal', // normal
      source: UX.utils.createOptions(1, 12),
      value:5,
      onChange: (resultData) => {
        wheelPickerButton.querySelector('[data-wheel-picker-set="MM"]').textContent = resultData.text;
        const year = Number(document.querySelector('[data-wheel-picker-button="aa1"] [data-wheel-picker-set="YYYY"]').textContent);
        const month = Number(resultData.value)
        UI.exe.wheelPickerDay.updateSource(UX.utils.dayOption(year, month));
      }
    });
    UI.exe.wheelPickerDay = new UX.WheelPicker({
      el: '#iosPicker_day',
      type: 'infinite', // normal
      source: UX.utils.dayOption(2023,5),
      value:1,
      onChange: (resultData) => {
        wheelPickerButton.querySelector('[data-wheel-picker-set="DD"]').textContent = resultData.text;
      }
    });
	</script>
</body>

</html>